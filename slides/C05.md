# Chapter 5: Branching

-------------------------------------------------------------------------------
## Overview Chapter 05

* `if` statement
* `switch` statement
* Recursion
* `while` loop
* `do` loop
* Jump statements

===============================================================================
# `if` statement
-------------------------------------------------------------------------------
## `if` statement

* Choice is binary
* `if` statement requires a conditional expression
* `if` statement requires a statement block

-------------------------------------------------------------------------------
### `if` statement: Syntax

```csharp []
var boolean_expression = true;
// ┌ keyword
// │  ┌ start of conditional expression
// │  │ ┌ conditional expression (a boolean expression)
// │  │ │                  ┌ End of conditional expression
   if ( boolean_expression )
   {
      // statement block
   }
```

-------------------------------------------------------------------------------
### `if` statement: Example

```csharp []
int apples = Random.Shared.Next(1, 10);
bool isOdd = apples % 2 == 1;
if (isOdd)
    Console.WriteLine("You have an odd number of apples");
```

-------------------------------------------------------------------------------
### `if` statement: Single statement (1/2)

A single statement can be written without a statement block

```csharp []
int apples = Random.Shared.Next(1, 10);
bool isOdd = apples % 2 == 1;
if (isOdd)
    Console.WriteLine("You have an odd number of apples");
```

-------------------------------------------------------------------------------
### `if` statement: Single statement (2/2)

But be careful, because without a block statement it will only execute the first statement

```csharp [1-4|5]
int apples = Random.Shared.Next(1, 10);
bool isOdd = apples % 2 == 1;
if (isOdd)
    Console.WriteLine("You have an odd number of apples");
    Console.WriteLine("Odd: a perfect division by two");
```

-------------------------------------------------------------------------------
### `if` statement with `else`

```csharp []
int apples = Random.Shared.Next(1, 10);
bool isOdd = apples % 2 == 1;
if (isOdd)
{
    Console.WriteLine("You have an odd number of apples");
}
else
{
    Console.WriteLine("You have an even number of apples");
}
```

-------------------------------------------------------------------------------
### `if` statement with `else`

Can also be written without a statement block

```csharp []
int apples = Random.Shared.Next(1, 10);
bool isOdd = apples % 2 == 1;
if (isOdd)
    Console.WriteLine("You have an odd number of apples");
else
    Console.WriteLine("You have an even number of apples");
```

-------------------------------------------------------------------------------
### `if` statement with `else if`
What if you want to perform more than one check?

```csharp []
int apples = Random.Shared.Next(1, 5);
if (apples == 1)
    Console.WriteLine("You have one apple");
else if (apples == 2)
    Console.WriteLine("You have two apples");
else
    Console.WriteLine("You have more than two apples");
```

-------------------------------------------------------------------------------
### `if` statement with `else if`

```csharp []    
int apples = Random.Shared.Next(1, 5);
if (apples == 1)
{
    Console.WriteLine("You have one apple");
}
else
{
    if (apples == 2)
    {
        Console.WriteLine("You have two apples");
    }
    else 
    { 
            Console.WriteLine("You have more than two apples");
    }
}
```

notes: Explain that this is the same as before, but with all single statements converted to blocks

-------------------------------------------------------------------------------
### `if` statement with `else if`

```csharp []    
int apples = Random.Shared.Next(1, 5);
if (apples == 1)       Console.WriteLine("You have one apple");
else if (apples == 2)  Console.WriteLine("You have two apples");
else if (apples == 3)  Console.WriteLine("You have three apples");
else if (apples == 4)  Console.WriteLine("You have four apples");
else if (apples == 5)  Console.WriteLine("You have five apples");
else                   Console.WriteLine("You have more than five apples");
```

notes: Explain that the above if fully written out would result in a lot of indentation


===============================================================================
# `switch` statement
-------------------------------------------------------------------------------
## `switch` statement

* Usefull when you have a lot of `if` statements about the same variable
* `switch` statement requires a value expression
* A `switch` consists of one or more `case` statements
* A `switch` can have an optional `default` statement
* Every `case` statement requires a constant expression
* Every `case` statement must end with a `break` statement

-------------------------------------------------------------------------------
### `switch` statement: Syntax

```csharp []
int apples = Random.Shared.Next(1, 10);
// ┌ keyword
// │      ┌ start of value expression
// │      │ ┌ value expression
// │      │ │      ┌ End of value expression
   switch ( apples )
   {
      // ....
   }
```

-------------------------------------------------------------------------------
### `switch` statement: Example

```csharp []
int apples = Random.Shared.Next(1, 10);
switch ( apples )
{
// ┌ keyword
// │    ┌ start of constant expression
   case 1:
      Console.WriteLine("You have one apples");
      break;
   case 2:
      Console.WriteLine("You have two apples");
      break;
   default:
      Console.WriteLine($"You have {apples} apples");
      break;
}
```

-------------------------------------------------------------------------------
### `switch` statement: Fallthrough

```csharp []
int apples = Random.Shared.Next(1, 10);
switch ( apples )
{
   case 1:
      Console.WriteLine("You have one apples");
   case 2:
      Console.WriteLine("You have two apples");
   case 3:  // Fallthrough to 4
   case 4:
        Console.WriteLine("You have three or four apples");
   default:
      Console.WriteLine($"You have {apples} apples");
      break;
}
```

notes: Normally we avoid fallthrough, but it can be useful in some cases.

-------------------------------------------------------------------------------
### `switch` statement: patterns

```csharp []
int apples = Random.Shared.Next(1, 10);
switch ( apples )
{
   // ...

// ┌ keyword
// │    ┌ relational pattern
   case > 5:
        Console.WriteLine("You have more than five apples");
   
// ...
}
```


===============================================================================
# Recursion
-------------------------------------------------------------------------------
## define recursion

* A function that calls itself
* Often problematic, but can be useful

-------------------------------------------------------------------------------
### Recursion: Example

```csharp []
void eatApples(int n)
{
    n--;
    Console.WriteLine($"Eating an apple. {n} left");
    if(n > 0) eatApples(n);
}

eatApples(10_000); // Works fine
eatApples(100_000); // Stack overflow!
```

-------------------------------------------------------------------------------
### Stack overflow

* The "stack" is a internal data structure that keeps track of the current function call, so that when the function returns, the program knows where to continue.
* But if you call a function from itself, the stack will grow without end, until it runs out of memory.
* So when the "stack" is full, it will overflow, and the program will crash.
* Solution: Use a loop instead of recursion

===============================================================================
# `while` statement
-------------------------------------------------------------------------------
## `while` statement
* Similar to an `if` statement, but the condition is checked before the body is executed
* The body is executed zero or more times

-------------------------------------------------------------------------------
### `while` statement: Syntax

```csharp []
int apples = Random.Shared.Next(1, 10);
// ┌ keyword
// │    ┌ start of condition
// │    │ ┌ condition
// │    │ │      ┌ End of condition
while ( apples > 0 )
{
    // Body of while loop
    n--;
    Console.WriteLine($"Eating an apple. {n} left");
}
```

notes: Since no method is called, the stack will increase


===============================================================================
# `do` statement
-------------------------------------------------------------------------------
## `do` statement
* Similar to a `while` statement, but the body is executed at least once
* The condition is checked after the body is executed
* Sometimes called a "do-while" loop
* Not often used

-------------------------------------------------------------------------------
### `do` statement: Syntax

```csharp []
int apples = 0;
// ┌ keyword
   do
   {
       // Body of do-while loop
       Console.WriteLine("You need to have some apples.");
       Console.WriteLine("How many apples do you need?");
       Console.Write("Please enter a number: ");
       apples = int.Parse(Console.ReadLine());
   } while ( apples > 0 );
//   │     │  │         │└ Statement terminator
//   │     │  │         └ End of condition
//   │     │  └ condition
//   │     └ start of condition
//   └ keyword
```

notes:
- Remind that a `do-while` has a semicolon at the end, while a `while` does not

===============================================================================
# Jump statements
-------------------------------------------------------------------------------
## Types of jump statements
* `return` statement
* `break` statement
* `continue` statement
* `goto` statement

notes:
- calling a method will result in a jump as well, but it's not a jump statement

-------------------------------------------------------------------------------
### `return` statement
* Used to return from a method
* Can return a value
* Already covered in previous lessons

-------------------------------------------------------------------------------
### `break` statement
* Used to break out of a loop
* Must be used in `switch` statements
* Can be used in 
  * `switch`
  * `while`
  * `do-while`
  * `for` (we will cover this later)

-------------------------------------------------------------------------------
#### Example of `break`

```csharp []
int apples = Random.Shared.Next(1, 10);
while(true) // Infinite loop
{
    apples--;
    Console.WriteLine($"Eating an apple. {n} left");
    if (apples % 2 == 1) break; // Odd number left
}
```

-------------------------------------------------------------------------------
### `break` and `continue` statement
* `continue` will skip the rest of the loop body and continue with the next iteration
* It will **not** skip the condition check

-------------------------------------------------------------------------------
#### Example of `continue`

```csharp []
int apples = Random.Shared.Next(1, 10);
while(true) // Infinite loop
{
    apples--;
    Console.WriteLine($"Eating an apple. {apples} left");
	if (apples % 2 == 1) break; // Odd number left
	else continue; // Even number left, let's eat another apple
}
```

-------------------------------------------------------------------------------
### `goto` statement
* Edgar Dijkstra: Go To Statement Considered Harmful
* Can be used to jump directly to a place in the code
* We will **not** use this in this course

-------------------------------------------------------------------------------
#### Example of `goto`

```csharp []
int apples = Random.Shared.Next(1, 10);
start:
if ( apples <= 0 ) goto end;
n--;
Console.WriteLine($"Eating an apple. {n} left");
goto start;
end:
Console.WriteLine("No more apples");
```


===============================================================================
## Let's write some code!

> Don't worry if it doesn't work right. If everything did, you'd be out of a job
> 
> <cite>Mosher's Law of Software Engineering</cite>